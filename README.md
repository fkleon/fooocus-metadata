# Fooocus metadata

A go package for reading and writing [Fooocus](https://github.com/lllyasviel/Fooocus) metadata:

- Read embedded metadata for image files generated by Fooocus.
- Read metadata from the the [Private Log file](https://github.com/lllyasviel/Fooocus/discussions/160) (as fallback in case no embedded metadata is available).
- Write metadata to PNG which can be loaded into Fooocus through `Input Image > Metadata`.

## Usage

This package is intended to be used programmatically. It includes a [command line tool](./cmd/file/main.go) to read metadata from a file, which serves as a usage example.

## Compatibility matrix

| MIME | Source  | Read | Write |
|------|---------|------|-------|
| JPG  | Embedded (EXIF) | ☑️ | ❌ |
| JPG  | Private Log | ☑️ | N/A |
| PNG  | Embedded (PNG tEXt) | ☑️ | ☑️ |
| PNG  | Private Log | ☑️ | N/A |
| WEBP | Embedded (EXIF) | ☑️ | ❌ |
| WEBP | Private Log | ☑️ | N/A |

### Metadata scheme

Fooocus supports two metadata schemes:

- `fooocus`(json) - the native scheme.
- `a1111`(plain text) - for compatibility with Civitai.

This package supports only the native `fooocus` scheme.

### Metadata format

There are two known versions of the metadata format:

- The *current* metadata format (Fooocus v2.2.0 and newer).
- The *"legacy"* metadata format (Fooocus v2.1.0 and older).

This package supports both formats.